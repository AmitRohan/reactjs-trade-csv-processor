(this["webpackJsonpreactjs-trade-csv-processor"]=this["webpackJsonpreactjs-trade-csv-processor"]||[]).push([[0],{130:function(e,t){},132:function(e,t){},157:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(80),s=n.n(a),c=(n(96),n(18)),r=n(23),l=n(24),d=n(26),p=n(25),h=n.p+"static/media/logo.6ce24c58.svg",u=(n(97),n(82)),C=n.n(u),j=n(179),f=n(181),b=n(182),v=n(1),O=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)(j.a,{sx:{minWidth:275},children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"div",children:this.props.coinData.coinsOwned+" "+this.props.coinToken+" Owned"}),Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h6",component:"div",children:"Price"}),Object(v.jsx)(b.a,{variant:"body2",color:"text.secondary",children:this.props.coinPrice}),Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h6",component:"div",children:"Current Value"}),Object(v.jsx)(b.a,{variant:"body2",color:"text.secondary",children:this.props.coinData.currentValue}),Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h6",component:"div",children:"Money Invested (Without fee)"}),Object(v.jsx)(b.a,{variant:"body2",color:"text.secondary",children:this.props.coinData.moneyInvested}),Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h6",component:"div",children:"Fees Paid"}),Object(v.jsx)(b.a,{variant:"body2",color:"text.secondary",children:this.props.coinData.fee}),Object(v.jsx)(b.a,{gutterBottom:!0,variant:"h6",component:"div",children:"Money Invested (With fee)"}),Object(v.jsx)(b.a,{variant:"body2",color:"text.secondary",children:this.props.coinData.moneyInvestedWithFees})]})})}}]),n}(o.Component),m=O,x=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).getProfit=function(){var e=o.props.coinData.currentValue/o.props.coinData.moneyInvested;return e*=100,e*=100,e%=100,e/=100},o}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsxs)("header",{children:[Object(v.jsx)("div",{}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("h5",{children:[this.props.coinToken," Tokens"]}),Object(v.jsxs)("p",{children:["Owned ",this.props.coinData.coinsOwned]}),Object(v.jsxs)("p",{children:["Value ",this.props.coinData.currentValue]}),Object(v.jsxs)("p",{children:["Profit ",this.getProfit()]}),Object(v.jsxs)("p",{children:["Invested ",this.props.coinData.moneyInvested]})]})]})})}}]),n}(o.Component),g=(o.Component,n(183)),y=n(184),D=n(175),k={coinsOwned:0,currentValue:0,fee:0,moneyInvested:0,moneyInvestedWithFees:0},P=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).handleCoinSelection=function(e,t){var n=o.props.allSuportedCoins[t]||"";o.state.active!==n&&(o.setState({active:n,coinIndex:t}),o.props.updateSelectedToken(n))},o.getTabs=function(){return o.props.allSuportedCoins.map((function(e){return Object(v.jsx)(g.a,{label:e},e)}))},o.state={active:"",coinIndex:0,selectedCoinData:k,selectedCoinDataSet:[],selectedCoinPrice:-1},o}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(y.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(v.jsx)(D.a,{value:this.state.coinIndex,"aria-label":"suported eth coin",onChange:this.handleCoinSelection,children:this.getTabs()})}),null===this.props.selectedCoinToken?Object(v.jsx)("div",{children:" Select a token "}):Object(v.jsx)(m,{coinToken:this.props.selectedCoinToken,coinPrice:this.props.selectedCoinPrice,coinData:this.props.selectedCoinData})]})}}]),n}(o.Component),F=n(185),S=n(186),I=n(187),T=n(178),w=n(108),A=new(n(141)),L={coinsOwned:0,currentValue:0,fee:0,moneyInvested:0,moneyInvestedWithFees:0},B=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).postProcessingCheckpointCounter=0,o.handleFiles=function(e){o.postProcessingCheckpointCounter=0;o.setState({postProcessingCheckpoints:999999,postProcessingDone:!0});var t=new FileReader;t.onload=function(e){w(t.result,{columns:!0,trim:!0},(function(e,t){o.setState({fileUploaded:!0,postProcessingCheckpoints:0});var n=o.getAllCoinsFromReport(t).filter((function(e){return-1!=["BTC","ETH"].indexOf(e)}));o.setState({allSuportedCoins:n,fileData:t})}))},t.readAsText(e[0])},o.getCoinDataFromReport=function(e){return o.state.fileData.filter((function(t){return t.Coin.toLowerCase()===e.toLowerCase()}))},o.getAllCoinsFromReport=function(e){return Object(c.a)(new Set(e.map((function(e){return e.Coin}))))},o.analyzeCoinData=function(e,t){var n=e;return"BUY"===t.SIDE?(n.coinsOwned+=parseFloat(t.Crypto_Amt),n.moneyInvested-=1e8*parseFloat(t.Crypto_Amt)*(1e8*parseFloat(t.Rate)),n.moneyInvested/=1e16,n.moneyInvestedWithFees-=parseFloat(t.FIAT)):(n.coinsOwned-=parseFloat(t.Crypto_Amt),n.moneyInvested+=1e8*parseFloat(t.Crypto_Amt)*(1e8*parseFloat(t.Rate)),n.moneyInvested/=1e16,n.moneyInvestedWithFees+=parseFloat(t.FIAT)),n.fee+=parseFloat(t.Fee),n.currentValue=n.coinsOwned*o.state.selectedCoinPrice,0!==n.currentValue&&(n.currentValue-=n.fee),n},o.postProcessingCheckpoints=0,o.fetchCoinDataUsingId=function(e){var t=o.postProcessingCheckpointCounter;A.coins.fetch(o.state.allCoinCoinGeckoId[t],{}).then((function(n){var i=n.data.market_data.current_price.inr,a=o.state.allCoinPrice;a[t]=i,o.setState({allCoinPrice:a});var s=o.getCoinDataFromReport(o.state.allSuportedCoins[t]),c=Object.assign({},L),r=s.reduce(o.analyzeCoinData,c),l=o.state.allCoinData;l[t]=r,o.setState({allCoinData:l}),e()}))},o.updateLatestCoinPricesFromCoinGecko=function(){A.coins.list().then((function(e){if(200===e.code){var t=e.data.filter((function(e){return-1!=o.state.allSuportedCoins.indexOf(e.symbol.toUpperCase())}));o.postProcessingCheckpointCounter=0;var n=t.length;o.setState({postProcessingCheckpoints:n});var i=o.state.allCoinCoinGeckoId;t.map((function(e){var t=e.symbol.toLowerCase(),n=o.state.allSuportedCoins.indexOf(t.toUpperCase());i[n]=e.id})),o.setState({allCoinCoinGeckoId:i});!function e(){n<=o.postProcessingCheckpointCounter&&!o.state.postProcessingDone?o.setState({postProcessingDone:!0}):o.fetchCoinDataUsingId((function(){o.postProcessingCheckpointCounter++,e()}))}()}}))},o.fetchLatestDataFromCoinGecko=function(){A.coins.list().then((function(e){200===e.code&&e.data.map((function(e){e.symbol.toLowerCase()===o.state.selectedCoinToken.toLowerCase()&&(console.log("Fetching Latest Coin Data"),A.coins.fetch(e.id,{}).then((function(e){console.log("Latest Coin Data Fetched");var t=o.state.selectedCoinToken,n=e.data.market_data.current_price.inr,i=o.getCoinDataFromReport(t),a=Object.assign({},L),s=i.reduce(o.analyzeCoinData,a);o.setState({selectedCoinPrice:n}),o.setState({selectedCoinDataSet:i,selectedCoinData:s}),console.log("selectedCoinName",t,i)})),console.log("Fetching Historic Prices"),A.coins.fetchMarketChart(e.id,{days:91,vs_currency:"inr",interval:"daily "}).then((function(e){console.log("Historic Prices Fetched");e.data.prices.filter((function(e,t){return t>61})).map((function(e){return Math.round(10*e[1])/10}))})))}))}))},o.handleNewTokenSelection=function(e){o.setState({selectedCoinToken:e}),o.fetchLatestDataFromCoinGecko()},o.state={fileUploaded:!1,postProcessingDone:!1,postProcessingCheckpoints:0,fileData:[],allCoinData:[],allCoinCoinGeckoId:[],allCoinPrice:[],allSuportedCoins:[],selectedCoinData:L,selectedCoinDataSet:[],selectedCoinPrice:-1,selectedCoinToken:""},o}return Object(l.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(F.a,{position:"static",children:Object(v.jsxs)(S.a,{children:[Object(v.jsx)(I.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(v.jsx)(b.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:this.state.postProcessingDone?"Detail":"Upload your file"}),Object(v.jsx)(T.a,{color:"inherit",children:"Reset"})]})}),this.state.postProcessingDone?Object(v.jsx)("div",{children:Object(v.jsx)(P,{selectedCoinToken:this.state.selectedCoinToken,selectedCoinPrice:this.state.selectedCoinPrice,selectedCoinData:this.state.selectedCoinData,updateSelectedToken:this.handleNewTokenSelection,allSuportedCoins:this.state.allSuportedCoins})}):Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("img",{src:h,height:"100px",width:"100px",className:"App-logo",alt:"logo"}),Object(v.jsx)("label",{children:"Upload Report"}),Object(v.jsx)(C.a,{handleFiles:this.handleFiles,fileTypes:".csv",children:Object(v.jsx)(T.a,{variant:"outlined",children:"Upload"})})]})]})}}]),n}(o.Component),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,188)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),i(e),a(e),s(e)}))};s.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(B,{})}),document.getElementById("root")),R()},96:function(e,t,n){},97:function(e,t,n){}},[[157,1,2]]]);
//# sourceMappingURL=main.6ce2ffbd.chunk.js.map